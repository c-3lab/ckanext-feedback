# Language Support (i18n)

This extension supports Japanese.  
To add new `gettext` entries or modify existing Japanese translations, follow the steps below.

## Common

### Debian/Ubuntu

1. Installation

    ```bash
    sudo apt-get install libmagic1
    ```

### Windows

1. Installation

    ```bash
    pip install python-magic-bin
    ```

### OSX

1. Installation
    * Homebrew

        ```bash
        brew install libmagic
        ```

    * macports

        ```bash
        port install file
        ```  

2. Create a symbolic link

    ```bash
    sudo ln -s /opt/homebrew/Cellar/libmagic/5.44/lib/libmagic.dylib /usr/local/lib/libmagic.dylib
    ```

    * Adjust `/opt/homebrew/Cellar/libmagic/5.44/lib/libmagic.dylib` according to your environment  

        * Check the path (Homebrew)

            ```bash
            brew --prefix libmagic
            ```

        * Check the path (macports)

            ```bash
            which file
            ```

### Troubleshooting

* Please refer to the [official documentation](https://pypi.org/project/python-magic/)

## Adding New Entries

When creating a new `.html` file and adding `gettext`  
When editing an existing `.html` file and adding or modifying `gettext`

1. Generate the `.pot` file with the following command

    ```bash
    poetry run poe babel-extract --version=$(python -c "import toml; print(toml.load('pyproject.toml')['project']['version'])")
    ```

2. Generate the `.po` file with the following command (for Japanese)

    ```bash
    poetry run poe babel-update --locale ja
    ```

3. Edit the `.po` file

4. Generate the `.mo` file with the following command

    ```bash
    poetry run poe babel-compile
    ```

## Modifying Existing Translations

To modify existing Japanese translations

1. Edit the existing `.po` file

2. Generate the `.mo` file with the following command

    ```bash
    poetry run poe babel-compile
    ```
